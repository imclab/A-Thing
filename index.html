<!DOCTYPE html>

<html>
<head>
    <title>A Thing</title>
    
    <!--
    	The {FM.js(Engine);}
    -->
    <script type="text/javascript" src="lib/fm/fmjsengine-min.js"></script>
    <!--
        A Thing's entry point.
    -->
    <script>
        //Include A Thing's files
        FM.includeJsFile("src/menuState.js");
        FM.includeJsFile("src/avatar.js");
        FM.includeJsFile("src/playState.js");
        FM.includeJsFile("src/endState.js");

        //Function called when every file is loaded.
        var start = function () {
            "use strict";
            //Add assets
            var assetManager = FM.AssetManager,
                param = FM.Parameters;
            //Debug mode
            //param.debug = true;

            //Add sounds
            assetManager.addAsset("wallSound", param.AUDIO, "assets/sfx/wall.wav");
            assetManager.addAsset("walk", param.AUDIO, "assets/sfx/walk.wav");
            assetManager.addAsset("visible", param.AUDIO, "assets/sfx/visible.wav");
            assetManager.addAsset("ambiance", param.AUDIO, "assets/sfx/ambiance.wav");
            assetManager.addAsset("wallSound", param.AUDIO, "assets/sfx/wall.mp3");
            assetManager.addAsset("walk", param.AUDIO, "assets/sfx/walk.mp3");
            assetManager.addAsset("visible", param.AUDIO, "assets/sfx/visible.mp3");
            assetManager.addAsset("ambiance", param.AUDIO, "assets/sfx/ambiance.mp3");

            //Add images
            assetManager.addAsset("avatar", param.IMAGE, "assets/gfx/avatar.png");
            assetManager.addAsset("eye", param.IMAGE, "assets/gfx/eye.png");
            assetManager.addAsset("iris", param.IMAGE, "assets/gfx/iris.png");
            assetManager.addAsset("cursor", param.IMAGE, "assets/gfx/cursor.png");
            assetManager.addAsset("body", param.IMAGE, "assets/gfx/body.png");
            assetManager.addAsset("wall", param.IMAGE, "assets/gfx/wall.png");
            assetManager.addAsset("wallInclined", param.IMAGE, "assets/gfx/wall_inclined.png");
            
            assetManager.addAsset("ground", param.IMAGE, "assets/gfx/ground.png");
            assetManager.addAsset("background", param.IMAGE, "assets/gfx/background.png");

            //Add files
            assetManager.addAsset("persistentData", param.FILE, "src/persistentData.json");
            assetManager.addAsset("world", param.FILE, "world/world.tmx");

            //Load assets
            assetManager.loadAssets();

            //Start the game
            FM.Game.run("canvas", "A Thing", 1024, 768, new menuState());
        };

        //Launch the sart function when every file is loaded
        window.addEventListener("load", start, false);
    </script>
</head>

<body style="background-color: #111;">

<canvas id="canvas" style="display: block;margin: auto;outline: none;cursor: none" tabindex='1'>
    <p>
    	This application requires a browser that supports the HTML5 Canvas element.
    </p>
</canvas>

</body>
</html>
